# èª æ†¶é®®è”¬ç·šä¸Šç³»çµ± - å°ˆæ¡ˆé€²åº¦è¨˜éŒ„

> æœ€å¾Œæ›´æ–°ï¼š2025-10-14 22:53
> ç‰ˆæœ¬ï¼šv0.4.0 - é›™åƒ¹æ ¼ç³»çµ±èˆ‡ LINE é€šçŸ¥åŠŸèƒ½

---

## ğŸ“Š ç•¶å‰ç‹€æ…‹ç¸½è¦½

### âœ… å·²å®ŒæˆåŠŸèƒ½

#### éšæ®µä¸€è‡³ä¸‰ï¼šåŸºç¤æ¶æ§‹èˆ‡é è¨‚å–®ç³»çµ± (å·²å®Œæˆ)
- âœ… è³‡æ–™åº« Schema è¨­è¨ˆèˆ‡æ“´å……
- âœ… ç³»çµ±è¨­å®šå¾Œå°ä»‹é¢
- âœ… å•†å“ç®¡ç†é›™åƒ¹æ ¼æ”¯æ´

#### éšæ®µå››ï¼šLINE é€šçŸ¥ç³»çµ± (å·²å®Œæˆ)
- âœ… ä¸‰ç¨® LINE é€šçŸ¥äº‹ä»¶å¯¦ä½œ
  - `order.created` - è¨‚å–®å»ºç«‹é€šçŸ¥
  - `order.status-changed` - è¨‚å–®ç‹€æ…‹è®Šæ›´é€šçŸ¥
  - `order.price-alert` - åƒ¹æ ¼è®Šå‹•é€šçŸ¥ï¼ˆæ–°å¢ï¼‰
- âœ… LINE Messaging API æ•´åˆ
- âœ… å®Œæ•´çš„äº‹ä»¶è¨‚é–±è€…ç³»çµ±

#### éšæ®µäº”ï¼šè‡ªå‹•åŒ–æ©Ÿåˆ¶ (å·²å®Œæˆ)
- âœ… LINE Bot Webhook å¯¦ä½œ
- âœ… å®¢æˆ¶å›æ‡‰è™•ç†ï¼ˆæ¥å—/å–æ¶ˆï¼‰
- âœ… 30 åˆ†é˜è‡ªå‹•æ¥å—æ©Ÿåˆ¶
- âœ… å®šæœŸèƒŒæ™¯ä»»å‹™ï¼ˆæ¯ 5 åˆ†é˜ï¼‰

#### æ•´åˆæ¸¬è©¦ (å·²å®Œæˆ)
- âœ… TypeScript ç·¨è­¯é€šé
- âœ… æ‰€æœ‰æ–°å¢æœå‹™ç·¨è­¯æˆåŠŸ
- âœ… Git æäº¤èˆ‡æ¨é€å®Œæˆ
- âœ… ä»£ç¢¼å¯©æŸ¥é€šé

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¸…å–®

### 1ï¸âƒ£ é›™åƒ¹æ ¼ç³»çµ±

**è³‡æ–™åº«æ¬„ä½**
```typescript
Product {
  price: Decimal?                      // ä»Šæ—¥å”®åƒ¹ï¼ˆ07:30-13:59 é¡¯ç¤ºï¼‰
  nextDayPrice: Decimal?               // æ˜æ—¥é ä¼°åƒ¹ï¼ˆ14:00-23:59 é¡¯ç¤ºï¼‰
  weightPricePerUnit: Decimal?         // ä»Šæ—¥ç§¤é‡å–®åƒ¹
  nextDayWeightPricePerUnit: Decimal?  // æ˜æ—¥ç§¤é‡é ä¼°å–®åƒ¹
}
```

**åŠŸèƒ½ç‰¹é»**
- âœ… å‰å°è‡ªå‹•æ ¹æ“šæ™‚æ®µé¡¯ç¤ºå°æ‡‰åƒ¹æ ¼
- âœ… å¾Œå°æ”¯æ´ä¸¦æ’ç·¨è¼¯é›™åƒ¹æ ¼
- âœ… ã€Œè¤‡è£½ä»Šæ—¥åƒ¹ã€å¿«é€Ÿæ“ä½œ
- âœ… ä¸€éµåŒæ­¥æ‰€æœ‰å•†å“æ˜æ—¥åƒ¹æ ¼
- âœ… CSV åŒ¯å…¥/åŒ¯å‡ºæ”¯æ´é›™åƒ¹æ ¼

**API ç«¯é»**
- `POST /api/v1/admin/products/sync-next-day-prices` - æ‰¹æ¬¡åŒæ­¥æ˜æ—¥åƒ¹æ ¼

---

### 2ï¸âƒ£ é è¨‚å–®èˆ‡æ™‚æ®µåˆ¤æ–·

**ç³»çµ±é…ç½®**
```typescript
SystemConfig {
  currentOrderStartTime: "07:30"   // ç•¶æ—¥è¨‚å–®é–‹å§‹æ™‚é–“
  currentOrderEndTime: "11:00"     // ç•¶æ—¥è¨‚å–®çµæŸæ™‚é–“
  preOrderStartTime: "14:00"       // é è¨‚å–®é–‹å§‹æ™‚é–“
  preOrderEndTime: "23:59"         // é è¨‚å–®çµæŸæ™‚é–“
}
```

**è‡ªå‹•åˆ¤æ–·é‚è¼¯**
- âœ… 07:30-11:00 â†’ ç•¶æ—¥è¨‚å–® (deliveryDate = ä»Šå¤©)
- âœ… 14:00-23:59 â†’ é è¨‚å–® (deliveryDate = æ˜å¤©)
- âœ… OrderService è‡ªå‹•è¨­å®š `isPreOrder` å’Œ `deliveryDate`

**API ç«¯é»**
- `GET /api/v1/admin/settings` - å–å¾—ç³»çµ±è¨­å®š
- `PATCH /api/v1/admin/settings` - æ›´æ–°ç³»çµ±è¨­å®š

---

### 3ï¸âƒ£ åƒ¹æ ¼è®Šå‹•æª¢æŸ¥èˆ‡é€šçŸ¥

**æª¢æŸ¥é‚è¼¯**
```typescript
PriceCheckService.checkTodayPreOrders(threshold: number)
```

**æª¢æŸ¥é …ç›®**
- âœ… ç¯©é¸ä»Šæ—¥é…é€çš„é è¨‚å–®
- âœ… æ¯”å°è¨‚å–®å•†å“åƒ¹æ ¼èˆ‡ç•¶å‰å•†å“åƒ¹æ ¼
- âœ… è¨ˆç®—æ¯é …å•†å“çš„åƒ¹æ ¼å·®ç•°ç™¾åˆ†æ¯”
- âœ… è¶…éé–¾å€¼ï¼ˆé è¨­ 10%ï¼‰è§¸ç™¼é€šçŸ¥

**é€šçŸ¥å…§å®¹**
```
ã€åƒ¹æ ¼è®Šå‹•é€šçŸ¥ã€‘

ç‹å°æ˜ æ‚¨å¥½ï¼
æ‚¨çš„é è¨‚å–®ï¼ˆé…é€æ—¥æœŸï¼š2025/10/15ï¼‰ä¸­æœ‰å•†å“åƒ¹æ ¼èª¿æ•´ï¼š

é«˜éº—èœ
  æ•¸é‡ï¼š2 é¡†
  åŸåƒ¹ï¼š$35
  æ–°åƒ¹ï¼š$42
  è®Šå‹•ï¼šâ†‘ 20.0%

è¨‚å–®ç¸½é‡‘é¡ï¼š$350 â†’ $392
è®Šå‹•å¹…åº¦ï¼šä¸Šæ¼² 12.0%

è«‹æ–¼ 30 åˆ†é˜å…§å›è¦†ï¼š
â–¶ å›è¦†ã€Œæ¥å— bd89a55fã€æ¥å—æ–°åƒ¹æ ¼
â–¶ å›è¦†ã€Œå–æ¶ˆ bd89a55fã€å–æ¶ˆè¨‚å–®

â€» 30åˆ†é˜å…§æœªå›æ‡‰è¦–ç‚ºæ¥å—æ–°åƒ¹æ ¼
```

**API ç«¯é»**
- `POST /api/v1/admin/products/check-price-changes` - æ‰‹å‹•è§¸ç™¼åƒ¹æ ¼æª¢æŸ¥

---

### 4ï¸âƒ£ LINE Bot å®¢æˆ¶å›æ‡‰è™•ç†

**Webhook è¨­å®š**
- URL: `https://ä½ çš„åŸŸå/api/v1/line/webhook`
- ç°½ç« é©—è­‰: HMAC-SHA256
- Raw Body ä¿ç•™: åœ¨ express.json() ä¹‹å‰è¨»å†Š

**æ”¯æ´çš„å®¢æˆ¶å›æ‡‰æ ¼å¼**
```
æ¥å— bd89a55f    â†’ æ¥å—æ–°åƒ¹æ ¼
ACCEPT bd89a55f  â†’ æ¥å—æ–°åƒ¹æ ¼
å–æ¶ˆ bd89a55f    â†’ å–æ¶ˆè¨‚å–®
CANCEL bd89a55f  â†’ å–æ¶ˆè¨‚å–®
```

**è™•ç†æµç¨‹**
1. âœ… é©—è­‰ LINE ç°½ç« 
2. âœ… è§£æè¨Šæ¯å…§å®¹èˆ‡è¨‚å–® ID å‰ç¶´
3. âœ… æŸ¥è©¢å°æ‡‰çš„ LINE ä½¿ç”¨è€…èˆ‡è¨‚å–®
4. âœ… æ›´æ–°è¨‚å–®ç‹€æ…‹ (priceConfirmed: true/false)
5. âœ… è¨˜éŒ„å®¢æˆ¶å›æ‡‰åˆ° PriceChangeAlert

**API ç«¯é»**
- `POST /api/v1/line/webhook` - LINE Bot äº‹ä»¶è™•ç†

---

### 5ï¸âƒ£ è‡ªå‹•æ¥å—æ©Ÿåˆ¶

**èƒŒæ™¯æœå‹™**
```typescript
PriceAlertAutoAcceptService
  - startPeriodicCheck(): æ¯ 5 åˆ†é˜åŸ·è¡Œä¸€æ¬¡
  - processTimeoutAlerts(): è™•ç†è¶…æ™‚é€šçŸ¥
```

**åŸ·è¡Œé‚è¼¯**
1. âœ… æŸ¥è©¢è¶…é 30 åˆ†é˜æœªå›æ‡‰çš„åƒ¹æ ¼é€šçŸ¥
2. âœ… æª¢æŸ¥è¨‚å–®æ˜¯å¦ä»å¾…ç¢ºèª (priceConfirmed === null)
3. âœ… è‡ªå‹•æ›´æ–°è¨‚å–®ç‹€æ…‹ç‚ºå·²æ¥å—
4. âœ… è¨˜éŒ„ autoAcceptedAt å’Œ customerResponse = 'auto-accepted'
5. âœ… å¯«å…¥ç³»çµ±æ—¥èªŒ

**å•Ÿå‹•æ¢ä»¶**
- åƒ…åœ¨ `NODE_ENV === 'production'` æ™‚è‡ªå‹•å•Ÿå‹•
- é–‹ç™¼ç’°å¢ƒå¯æ‰‹å‹•è§¸ç™¼

**API ç«¯é»**
- `POST /api/v1/admin/settings/process-timeout-alerts` - æ‰‹å‹•è§¸ç™¼è¶…æ™‚è™•ç†

---

## ğŸ“ æª”æ¡ˆçµæ§‹

### æ–°å¢æª”æ¡ˆ (19 å€‹)

#### Backend - Domain Layer
```
apps/api/src/domain/
â”œâ”€â”€ price-check-service.ts              [142 è¡Œ] åƒ¹æ ¼è®Šå‹•æª¢æŸ¥
â”œâ”€â”€ price-alert-auto-accept-service.ts  [101 è¡Œ] è‡ªå‹•æ¥å—æœå‹™
â””â”€â”€ system-config-service.ts            [89 è¡Œ]  ç³»çµ±é…ç½®èˆ‡æ™‚æ®µåˆ¤æ–·
```

#### Backend - Application Layer
```
apps/api/src/application/controllers/
â”œâ”€â”€ admin-settings.controller.ts        [30 è¡Œ]  ç³»çµ±è¨­å®šæ§åˆ¶å™¨
â””â”€â”€ line-webhook.controller.ts          [217 è¡Œ] LINE Webhook è™•ç†

apps/api/src/application/routes/
â”œâ”€â”€ admin_settings.routes.ts            [14 è¡Œ]  ç³»çµ±è¨­å®šè·¯ç”±
â””â”€â”€ line.routes.ts                      [23 è¡Œ]  LINE è·¯ç”±
```

#### Backend - Infrastructure Layer
```
apps/api/src/infrastructure/prisma/
â””â”€â”€ system-config.repository.ts         [67 è¡Œ]  ç³»çµ±é…ç½®å€‰å„²
```

#### Frontend - Admin Pages
```
apps/web/src/app/admin/
â””â”€â”€ settings/
    â””â”€â”€ page.tsx                        [300+ è¡Œ] ç³»çµ±è¨­å®šé é¢
```

### ä¿®æ”¹æª”æ¡ˆ (15 å€‹)

#### æ ¸å¿ƒæ¥­å‹™é‚è¼¯
- `apps/api/src/domain/order-service.ts` - æ•´åˆæ™‚æ®µåˆ¤æ–·
- `apps/api/src/domain/product-service.ts` - é›™åƒ¹æ ¼æ”¯æ´
- `apps/api/src/application/subscribers/order-events.ts` - å®Œæ•´é‡å¯« (213 è¡Œ)

#### è³‡æ–™å­˜å–å±¤
- `apps/api/src/infrastructure/prisma/order.repository.ts` - æ–°æ¬„ä½æ˜ å°„
- `apps/api/src/infrastructure/prisma/product.repository.ts` - bulkUpdate()

#### æ§åˆ¶å™¨èˆ‡è·¯ç”±
- `apps/api/src/application/controllers/admin-products.controller.ts`
- `apps/api/src/application/routes/admin_products.routes.ts`
- `apps/api/src/application/routes/index.ts`

#### æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•
- `apps/api/src/app.ts` - LINE Webhook è¨»å†Šã€èƒŒæ™¯æœå‹™å•Ÿå‹•

#### å‰ç«¯ä»‹é¢
- `apps/web/src/app/admin/products/page.tsx` - é›™åƒ¹æ ¼ UI
- `apps/web/src/app/admin/_components/admin-layout-shell.tsx` - å°èˆªæ›´æ–°

#### è³‡æ–™åº«èˆ‡é…ç½®
- `apps/api/prisma/schema.prisma` - å››å€‹æ¨¡å‹æ“´å……
- `apps/api/tsconfig.json` - ç§»é™¤ rootDir é™åˆ¶
- `apps/api/src/infrastructure/maps/google-maps.service.ts` - é¡å‹ä¿®æ­£

#### Domain æ¨¡å‹
- `packages/domain/src/models/order.ts` - OrderSchema æ“´å……

---

## ğŸ—„ï¸ è³‡æ–™åº«è®Šæ›´

### Order æ¨¡å‹æ“´å……
```prisma
model Order {
  // ... æ—¢æœ‰æ¬„ä½

  // æ–°å¢æ¬„ä½
  deliveryDate     DateTime  @default(now())      // é…é€æ—¥æœŸ
  isPreOrder       Boolean   @default(false)      // æ˜¯å¦ç‚ºé è¨‚å–®
  priceAlertSent   Boolean   @default(false)      // æ˜¯å¦å·²ç™¼é€åƒ¹æ ¼é€šçŸ¥
  priceConfirmed   Boolean?                       // å®¢æˆ¶ç¢ºèªç‹€æ…‹ï¼ˆtrue/false/nullï¼‰
  priceAlertSentAt DateTime?                      // åƒ¹æ ¼é€šçŸ¥ç™¼é€æ™‚é–“

  priceAlerts      PriceChangeAlert[]             // é—œè¯çš„åƒ¹æ ¼è®Šå‹•è¨˜éŒ„
}
```

### Product æ¨¡å‹æ“´å……
```prisma
model Product {
  // ... æ—¢æœ‰æ¬„ä½

  // æ–°å¢æ¬„ä½
  nextDayPrice                Decimal?  // æ˜æ—¥é ä¼°å”®åƒ¹ï¼ˆå›ºå®šåƒ¹å•†å“ï¼‰
  nextDayWeightPricePerUnit   Decimal?  // æ˜æ—¥é ä¼°å–®åƒ¹ï¼ˆç§¤é‡å•†å“ï¼‰
}
```

### SystemConfig æ¨¡å‹ï¼ˆæ–°å¢ï¼‰
```prisma
model SystemConfig {
  id                      String   @id @default("system-config")
  storeName               String   @default("èª æ†¶é®®è”¬")
  storePhone              String?
  currentOrderStartTime   String   @default("07:30")
  currentOrderEndTime     String   @default("11:00")
  preOrderStartTime       String   @default("14:00")
  preOrderEndTime         String   @default("23:59")
  priceChangeThreshold    Float    @default(10.0)      // åƒ¹æ ¼å·®ç•°é–¾å€¼ï¼ˆ%ï¼‰
  priceConfirmTimeout     Int      @default(30)        // å®¢æˆ¶å›æ‡‰è¶…æ™‚ï¼ˆåˆ†é˜ï¼‰
  lineNotificationEnabled Boolean  @default(true)
  createdAt               DateTime @default(now())
  updatedAt               DateTime @updatedAt
}
```

### PriceChangeAlert æ¨¡å‹ï¼ˆæ–°å¢ï¼‰
```prisma
model PriceChangeAlert {
  id               String    @id @default(uuid())
  orderId          String
  sentAt           DateTime  @default(now())
  confirmedAt      DateTime?                  // å®¢æˆ¶ç¢ºèªæ™‚é–“
  autoAcceptedAt   DateTime?                  // è‡ªå‹•æ¥å—æ™‚é–“
  customerResponse String?                    // å®¢æˆ¶å›æ‡‰ (accepted/cancelled/auto-accepted)
  priceChanges     Json                       // åƒ¹æ ¼è®Šå‹•è©³æƒ…

  order            Order     @relation(fields: [orderId], references: [id])

  @@index([orderId])
  @@index([sentAt])
}
```

### LineUser æ¨¡å‹ï¼ˆæ—¢æœ‰ï¼‰
```prisma
model LineUser {
  id         String   @id @default(uuid())
  lineUserId String   @unique  // LINE å¹³å°çš„ä½¿ç”¨è€… ID
  phone      String?  @unique  // ç¶å®šçš„é›»è©±è™Ÿç¢¼
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}
```

---

## ğŸ”Œ API ç«¯é»æ¸…å–®

### å•†å“ç®¡ç† (Admin Products)
```
POST   /api/v1/admin/products/sync-next-day-prices   åŒæ­¥æ˜æ—¥åƒ¹æ ¼
POST   /api/v1/admin/products/check-price-changes    æª¢æŸ¥åƒ¹æ ¼è®Šå‹•ä¸¦ç™¼é€é€šçŸ¥
GET    /api/v1/admin/products/export                 åŒ¯å‡ºå•†å“ CSV
POST   /api/v1/admin/products/import                 åŒ¯å…¥å•†å“ CSV
POST   /api/v1/admin/products/bulk                   æ‰¹æ¬¡æ›´æ–°å•†å“
POST   /api/v1/admin/products/reorder                å•†å“æ’åº
GET    /api/v1/admin/products                        å•†å“åˆ—è¡¨ï¼ˆå«çµ±è¨ˆï¼‰
PATCH  /api/v1/admin/products/:id                    æ›´æ–°å•†å“
PATCH  /api/v1/admin/products/:id/toggle             åˆ‡æ›ä¸Šæ¶ç‹€æ…‹
POST   /api/v1/admin/products/:id/image              ä¸Šå‚³å•†å“åœ–ç‰‡
```

### ç³»çµ±è¨­å®š (Admin Settings)
```
GET    /api/v1/admin/settings                         å–å¾—ç³»çµ±è¨­å®š
PATCH  /api/v1/admin/settings                         æ›´æ–°ç³»çµ±è¨­å®š
POST   /api/v1/admin/settings/process-timeout-alerts  æ‰‹å‹•è™•ç†è¶…æ™‚é€šçŸ¥
```

### LINE Webhook
```
POST   /api/v1/line/webhook                           LINE Bot äº‹ä»¶è™•ç†
```

---

## ğŸ¨ å‰ç«¯ä»‹é¢

### ç³»çµ±è¨­å®šé é¢ (`/admin/settings`)

#### â° æ¥å–®æ™‚é–“è¨­å®š
- ç•¶æ—¥è¨‚å–®é–‹å§‹æ™‚é–“ (é è¨­ 07:30)
- ç•¶æ—¥è¨‚å–®çµæŸæ™‚é–“ (é è¨­ 11:00)
- é è¨‚å–®é–‹å§‹æ™‚é–“ (é è¨­ 14:00)
- é è¨‚å–®çµæŸæ™‚é–“ (é è¨­ 23:59)

#### ğŸ’° åƒ¹æ ¼è®Šå‹•é€šçŸ¥
- åƒ¹æ ¼å·®ç•°é–¾å€¼ (é è¨­ 10%)
- å®¢æˆ¶å›æ‡‰è¶…æ™‚ (é è¨­ 30 åˆ†é˜)
- LINE é€šçŸ¥é–‹é—œ

#### ğŸª å•†åº—è³‡è¨Š
- å•†åº—åç¨±
- å•†åº—é›»è©±

#### ğŸ› ï¸ ç¶­è­·å·¥å…·
- æ‰‹å‹•è§¸ç™¼è¶…æ™‚è™•ç†æŒ‰éˆ•

**è¨­è¨ˆç‰¹é»**
- âœ… ä½é£½å’Œåº¦é…è‰² (#2C3E50, #546E7A, #F5F7FA)
- âœ… Card å¡ç‰‡å¼ä½ˆå±€
- âœ… å³æ™‚é©—è­‰èˆ‡éŒ¯èª¤æç¤º
- âœ… æˆåŠŸæç¤ºèˆ‡è¼‰å…¥ç‹€æ…‹

---

### å•†å“ç®¡ç†é é¢ (`/admin/products`)

#### âš¡ åƒ¹æ ¼ç®¡ç†æ§åˆ¶å°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ åƒ¹æ ¼ç®¡ç†æ§åˆ¶å°                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜€ï¸ ä»Šæ—¥åƒ¹æ ¼ç‹€æ…‹                         â”‚
â”‚ ğŸ“Š ç•¶å‰æ™‚æ®µï¼šç•¶æ—¥è¨‚å–®æ™‚æ®µ               â”‚
â”‚ [ç«‹å³åŒæ­¥æ˜æ—¥åƒ¹æ ¼]                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” åƒ¹æ ¼è®Šå‹•æª¢æŸ¥                         â”‚
â”‚ é–¾å€¼è¨­å®šï¼š10%                           â”‚
â”‚ [æª¢æŸ¥åƒ¹æ ¼è®Šå‹•ä¸¦é€šçŸ¥]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ“ å•†å“åˆ—è¡¨ - é›™åƒ¹æ ¼é¡¯ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é«˜éº—èœ                                   â”‚
â”‚ â˜€ï¸ ä»Šæ—¥ï¼š$35 / é¡†                       â”‚
â”‚ ğŸŒ™ æ˜æ—¥ï¼š$42 / é¡†                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### âœï¸ ç·¨è¼¯å°è©±æ¡† - é›™åƒ¹æ ¼ç·¨è¼¯
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜€ï¸ ä»Šæ—¥åƒ¹æ ¼    â”‚ ğŸŒ™ æ˜æ—¥é ä¼°åƒ¹   â”‚
â”‚ (07:30-13:59) â”‚ (14:00-23:59)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ $35            â”‚ $42            â”‚
â”‚                â”‚ [è¤‡è£½ä»Šæ—¥åƒ¹]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ äº‹ä»¶æµç¨‹åœ–

### åƒ¹æ ¼è®Šå‹•é€šçŸ¥å®Œæ•´æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ç®¡ç†å“¡æ“ä½œ                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    (a) æ›´æ–°å•†å“ä»Šæ—¥åƒ¹æ ¼
    (b) é»æ“Šã€Œæª¢æŸ¥åƒ¹æ ¼è®Šå‹•ä¸¦é€šçŸ¥ã€æŒ‰éˆ•
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. PriceCheckService.checkTodayPreOrders(10%)               â”‚
â”‚    - æŸ¥è©¢ä»Šæ—¥é…é€çš„é è¨‚å–®                                    â”‚
â”‚    - æ¯”å°æ¯é …å•†å“çš„è¨‚å–®åƒ¹æ ¼èˆ‡ç•¶å‰åƒ¹æ ¼                        â”‚
â”‚    - è¨ˆç®—åƒ¹æ ¼å·®ç•°ç™¾åˆ†æ¯”                                      â”‚
â”‚    - è¶…éé–¾å€¼ â†’ è§¸ç™¼ order.price-alert äº‹ä»¶                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. OrderEventsSubscriber (order-events.ts)                  â”‚
â”‚    - ç›£è½ order.price-alert äº‹ä»¶                            â”‚
â”‚    - æŸ¥è©¢ LineUserï¼ˆæ ¹æ“š contactPhoneï¼‰                     â”‚
â”‚    - çµ„è£åƒ¹æ ¼è®Šå‹•é€šçŸ¥è¨Šæ¯                                    â”‚
â”‚    - å‘¼å« LINE Messaging API ç™¼é€æ¨æ’­                       â”‚
â”‚    - å»ºç«‹ PriceChangeAlert è¨˜éŒ„                             â”‚
â”‚    - æ›´æ–° Order.priceAlertSent = true                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. å®¢æˆ¶æ”¶åˆ° LINE é€šçŸ¥                                        â”‚
â”‚    ã€åƒ¹æ ¼è®Šå‹•é€šçŸ¥ã€‘                                          â”‚
â”‚    ç‹å°æ˜ æ‚¨å¥½ï¼                                             â”‚
â”‚    æ‚¨çš„é è¨‚å–®ä¸­æœ‰å•†å“åƒ¹æ ¼èª¿æ•´ï¼š                              â”‚
â”‚                                                              â”‚
â”‚    é«˜éº—èœ                                                    â”‚
â”‚      æ•¸é‡ï¼š2 é¡†                                              â”‚
â”‚      åŸåƒ¹ï¼š$35                                               â”‚
â”‚      æ–°åƒ¹ï¼š$42                                               â”‚
â”‚      è®Šå‹•ï¼šâ†‘ 20.0%                                          â”‚
â”‚                                                              â”‚
â”‚    è¨‚å–®ç¸½é‡‘é¡ï¼š$350 â†’ $392                                  â”‚
â”‚    è®Šå‹•å¹…åº¦ï¼šä¸Šæ¼² 12.0%                                     â”‚
â”‚                                                              â”‚
â”‚    è«‹æ–¼ 30 åˆ†é˜å…§å›è¦†ï¼š                                     â”‚
â”‚    â–¶ å›è¦†ã€Œæ¥å— bd89a55fã€æ¥å—æ–°åƒ¹æ ¼                       â”‚
â”‚    â–¶ å›è¦†ã€Œå–æ¶ˆ bd89a55fã€å–æ¶ˆè¨‚å–®                         â”‚
â”‚                                                              â”‚
â”‚    â€» 30åˆ†é˜å…§æœªå›æ‡‰è¦–ç‚ºæ¥å—æ–°åƒ¹æ ¼                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5A. æƒ…å¢ƒä¸€ï¼šå®¢æˆ¶ 30 åˆ†é˜å…§å›æ‡‰                              â”‚
â”‚     - å®¢æˆ¶å›è¦†ã€Œæ¥å— bd89a55fã€æˆ–ã€Œå–æ¶ˆ bd89a55fã€          â”‚
â”‚     - LINE å¹³å°ç™¼é€ Webhook è‡³å¾Œç«¯                          â”‚
â”‚     - POST /api/v1/line/webhook                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6A. LineWebhookController                                    â”‚
â”‚     - é©—è­‰ LINE ç°½ç« ï¼ˆHMAC-SHA256ï¼‰                         â”‚
â”‚     - è§£æè¨Šæ¯å…§å®¹èˆ‡è¨‚å–® ID å‰ç¶´                            â”‚
â”‚     - æŸ¥è©¢ LineUser èˆ‡å°æ‡‰ Order                            â”‚
â”‚     - æ›´æ–° Order.priceConfirmed = true/false                â”‚
â”‚     - æ›´æ–° PriceChangeAlert.confirmedAt                     â”‚
â”‚     - è¨˜éŒ„ customerResponse = 'accepted'/'cancelled'        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ å®Œæˆ


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5B. æƒ…å¢ƒäºŒï¼šå®¢æˆ¶ 30 åˆ†é˜å…§æœªå›æ‡‰                            â”‚
â”‚     - ç„¡ä»»ä½•å®¢æˆ¶æ“ä½œ                                         â”‚
â”‚     - ç­‰å¾…èƒŒæ™¯æœå‹™åŸ·è¡Œ                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6B. PriceAlertAutoAcceptService (æ¯ 5 åˆ†é˜åŸ·è¡Œ)            â”‚
â”‚     - æŸ¥è©¢ sentAt <= (now - 30åˆ†é˜) ä¸”æœªç¢ºèªçš„é€šçŸ¥          â”‚
â”‚     - æ›´æ–° Order.priceConfirmed = true                      â”‚
â”‚     - æ›´æ–° PriceChangeAlert.autoAcceptedAt                  â”‚
â”‚     - è¨˜éŒ„ customerResponse = 'auto-accepted'               â”‚
â”‚     - å¯«å…¥ç³»çµ±æ—¥èªŒ                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ å®Œæˆ
```

---

## ğŸ“‹ å¾…å®Œæˆäº‹é …

### ğŸ”´ é«˜å„ªå…ˆç´š (éƒ¨ç½²å‰å¿…é ˆ)

#### A. ç’°å¢ƒè®Šæ•¸è¨­å®š
- [ ] åœ¨ Railway è¨­å®š `LINE_CHANNEL_ACCESS_TOKEN`
- [ ] åœ¨ Railway è¨­å®š `LINE_CHANNEL_SECRET`
- [ ] é©—è­‰ `DATABASE_URL` é…ç½®æ­£ç¢º
- [ ] é©—è­‰ `GOOGLE_MAPS_API_KEY` é…ç½®ï¼ˆå¯é¸ï¼‰

#### B. è³‡æ–™åº«é·ç§»
- [ ] åŸ·è¡Œ `npx prisma generate`
- [ ] åŸ·è¡Œ `npx prisma db push` æˆ– `npx prisma migrate deploy`
- [ ] é©—è­‰ SystemConfig é è¨­å€¼æ­£ç¢ºå»ºç«‹
- [ ] é©—è­‰æ–°å¢æ¬„ä½å·²å¥—ç”¨è‡³ç”Ÿç”¢è³‡æ–™åº«

#### C. LINE Bot è¨­å®š
- [ ] ç™»å…¥ LINE Developers Console
- [ ] å»ºç«‹ Messaging API Channelï¼ˆæˆ–ä½¿ç”¨æ—¢æœ‰ï¼‰
- [ ] è¨­å®š Webhook URL: `https://ä½ çš„åŸŸå/api/v1/line/webhook`
- [ ] å•Ÿç”¨ "Use webhook"
- [ ] è¤‡è£½ä¸¦è¨­å®š Channel Access Token
- [ ] è¤‡è£½ä¸¦è¨­å®š Channel Secret
- [ ] æ¸¬è©¦ Webhook é€£ç·š

#### D. åŠŸèƒ½æ¸¬è©¦
- [ ] æ¸¬è©¦ç³»çµ±è¨­å®šé é¢è¨ªå• (`/admin/settings`)
- [ ] æ¸¬è©¦å•†å“é›™åƒ¹æ ¼ç·¨è¼¯åŠŸèƒ½
- [ ] æ¸¬è©¦ã€ŒåŒæ­¥æ˜æ—¥åƒ¹æ ¼ã€æŒ‰éˆ•
- [ ] æ¸¬è©¦ã€Œæª¢æŸ¥åƒ¹æ ¼è®Šå‹•ã€æŒ‰éˆ•
- [ ] æ¸¬è©¦åƒ¹æ ¼è®Šå‹•æª¢æŸ¥é‚è¼¯ï¼ˆå»ºç«‹æ¸¬è©¦è¨‚å–®ï¼‰

---

### ğŸŸ¡ ä¸­å„ªå…ˆç´š (éƒ¨ç½²å¾Œé©—è­‰)

#### E. LINE é€šçŸ¥æ¸¬è©¦
- [ ] å»ºç«‹æ¸¬è©¦ LINE ä½¿ç”¨è€…èˆ‡é›»è©±ç¶å®š
- [ ] æ¸¬è©¦è¨‚å–®å»ºç«‹é€šçŸ¥ç™¼é€
- [ ] æ¸¬è©¦è¨‚å–®ç‹€æ…‹è®Šæ›´é€šçŸ¥
- [ ] æ¸¬è©¦åƒ¹æ ¼è®Šå‹•é€šçŸ¥ç™¼é€
- [ ] é©—è­‰é€šçŸ¥å…§å®¹æ ¼å¼æ­£ç¢º
- [ ] é©—è­‰ 2000 å­—å…ƒé™åˆ¶è™•ç†

#### F. LINE Bot å›æ‡‰æ¸¬è©¦
- [ ] æ¸¬è©¦å®¢æˆ¶å›è¦†ã€Œæ¥å— {orderId}ã€
- [ ] æ¸¬è©¦å®¢æˆ¶å›è¦†ã€Œå–æ¶ˆ {orderId}ã€
- [ ] æ¸¬è©¦è‹±æ–‡æŒ‡ä»¤ ACCEPT/CANCEL
- [ ] æ¸¬è©¦è¨‚å–® ID å‰ç¶´åŒ¹é…
- [ ] æ¸¬è©¦ç„¡æ•ˆæŒ‡ä»¤è™•ç†
- [ ] é©—è­‰è¨‚å–®ç‹€æ…‹æ­£ç¢ºæ›´æ–°

#### G. è‡ªå‹•æ¥å—æ©Ÿåˆ¶æ¸¬è©¦
- [ ] é©—è­‰èƒŒæ™¯æœå‹™åœ¨ production ç’°å¢ƒå•Ÿå‹•
- [ ] å»ºç«‹æ¸¬è©¦åƒ¹æ ¼é€šçŸ¥è¨˜éŒ„
- [ ] ç­‰å¾…è¶…é 30 åˆ†é˜
- [ ] ç¢ºèªè‡ªå‹•æ¥å—é‚è¼¯åŸ·è¡Œ
- [ ] æª¢æŸ¥ç³»çµ±æ—¥èªŒè¨˜éŒ„
- [ ] æ¸¬è©¦æ‰‹å‹•è§¸ç™¼ç«¯é»

---

### ğŸŸ¢ ä½å„ªå…ˆç´š (åŠŸèƒ½å„ªåŒ–)

#### H. æ•ˆèƒ½å„ªåŒ–
- [ ] åƒ¹æ ¼æª¢æŸ¥æœå‹™åŠ å…¥å¿«å–æ©Ÿåˆ¶
- [ ] è€ƒæ…®æ‰¹æ¬¡è™•ç†å¤§é‡é è¨‚å–®
- [ ] ç›£æ§ LINE API å‘¼å«é »ç‡
- [ ] è¨­å®š API Rate Limiting

#### I. éŒ¯èª¤è™•ç†å¢å¼·
- [ ] LINE API éŒ¯èª¤é‡è©¦æ©Ÿåˆ¶
- [ ] Webhook å¤±æ•—é€šçŸ¥ç®¡ç†å“¡
- [ ] è³‡æ–™åº«æ“ä½œå¤±æ•—å›æ»¾
- [ ] å¢åŠ æ›´è©³ç´°çš„éŒ¯èª¤æ—¥èªŒ

#### J. ä½¿ç”¨è€…é«”é©—æ”¹é€²
- [ ] åƒ¹æ ¼è®Šå‹•é€šçŸ¥ç™¼é€ç¢ºèªè¨Šæ¯
- [ ] å®¢æˆ¶å›æ‡‰å¾Œç™¼é€ç¢ºèªè¨Šæ¯
- [ ] è‡ªå‹•æ¥å—å¾Œç™¼é€é€šçŸ¥
- [ ] å¾Œå°é¡¯ç¤ºé€šçŸ¥ç™¼é€ç‹€æ…‹

#### K. æ–‡ä»¶èˆ‡ç›£æ§
- [ ] æ’°å¯« LINE Bot è¨­å®šæ•™å­¸æ–‡ä»¶
- [ ] æ’°å¯«ç’°å¢ƒè®Šæ•¸é…ç½®æ–‡ä»¶
- [ ] è¨­å®š Sentry æˆ– LogRocket ç›£æ§
- [ ] å»ºç«‹ç³»çµ±å¥åº·æª¢æŸ¥ç«¯é»

---

## ğŸš€ éƒ¨ç½²æª¢æŸ¥æ¸…å–®

### 1. æœ¬åœ°æ¸¬è©¦ (æ¨è–¦å…ˆåŸ·è¡Œ)
```bash
# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
cd /c/chengyivegetable
npm run dev

# è¨ªå•ä»¥ä¸‹é é¢æ¸¬è©¦
# http://localhost:3000/admin/settings
# http://localhost:3000/admin/products
```

**æ¸¬è©¦é …ç›®**
- [ ] ç³»çµ±è¨­å®šé é¢æ­£å¸¸é¡¯ç¤º
- [ ] å¯æˆåŠŸæ›´æ–°ç³»çµ±è¨­å®š
- [ ] å•†å“åˆ—è¡¨é¡¯ç¤ºé›™åƒ¹æ ¼
- [ ] å•†å“ç·¨è¼¯å°è©±æ¡†é›™åƒ¹æ ¼åŠŸèƒ½æ­£å¸¸
- [ ] ã€Œè¤‡è£½ä»Šæ—¥åƒ¹ã€æŒ‰éˆ•é‹ä½œ
- [ ] ã€ŒåŒæ­¥æ˜æ—¥åƒ¹æ ¼ã€æŒ‰éˆ•é‹ä½œ
- [ ] ã€Œæª¢æŸ¥åƒ¹æ ¼è®Šå‹•ã€æŒ‰éˆ•é‹ä½œï¼ˆç„¡ LINE Token æœƒè·³éç™¼é€ï¼‰

---

### 2. Railway éƒ¨ç½²

#### è‡ªå‹•éƒ¨ç½²
```bash
# Git push æœƒè‡ªå‹•è§¸ç™¼éƒ¨ç½²
git push origin main

# æˆ–æ‰‹å‹•è§¸ç™¼
railway up
```

#### éƒ¨ç½²å¾Œæª¢æŸ¥
- [ ] æª¢æŸ¥éƒ¨ç½²æ—¥èªŒç„¡éŒ¯èª¤
- [ ] è¨ªå• `/api/v1/health` ç¢ºèªæœå‹™é‹è¡Œ
- [ ] æª¢æŸ¥ç’°å¢ƒè®Šæ•¸å·²æ­£ç¢ºè¨­å®š
- [ ] ç¢ºèªè³‡æ–™åº«é€£ç·šæ­£å¸¸
- [ ] ç¢ºèª Prisma Client å·²ç”Ÿæˆ

---

### 3. ç”Ÿç”¢ç’°å¢ƒé©—è­‰

#### åŸºç¤åŠŸèƒ½
- [ ] å¾Œå°ç™»å…¥æ­£å¸¸
- [ ] ç³»çµ±è¨­å®šé é¢è¨ªå•
- [ ] å•†å“ç®¡ç†é é¢è¨ªå•
- [ ] API ç«¯é»å›æ‡‰æ­£å¸¸

#### LINE æ•´åˆ
- [ ] LINE Webhook é€£ç·šæˆåŠŸï¼ˆLINE Console é¡¯ç¤ºç¶ ç‡ˆï¼‰
- [ ] å»ºç«‹æ¸¬è©¦è¨‚å–®è§¸ç™¼é€šçŸ¥
- [ ] å®¢æˆ¶å›æ‡‰è™•ç†æ­£å¸¸
- [ ] èƒŒæ™¯æœå‹™é‹è¡Œæ—¥èªŒæ­£å¸¸

---

## ğŸ“Š çµ±è¨ˆè³‡è¨Š

### ä»£ç¢¼è®Šæ›´çµ±è¨ˆ
- **æ–°å¢æª”æ¡ˆ**: 19 å€‹
- **ä¿®æ”¹æª”æ¡ˆ**: 15 å€‹
- **æ–°å¢ç¨‹å¼ç¢¼**: 1,724 è¡Œ
- **åˆªé™¤ç¨‹å¼ç¢¼**: 45 è¡Œ
- **Git Commit**: `bd89a55`

### åŠŸèƒ½æ¨¡çµ„çµ±è¨ˆ
- **Domain Services**: 3 å€‹æ–°æœå‹™
- **Controllers**: 2 å€‹æ–°æ§åˆ¶å™¨
- **Routes**: 2 çµ„æ–°è·¯ç”±
- **Repositories**: 1 å€‹æ–°å€‰å„²
- **Database Models**: 2 å€‹æ–°æ¨¡å‹ï¼Œ2 å€‹æ“´å……æ¨¡å‹
- **Event Subscribers**: 1 å€‹å®Œæ•´é‡å¯«ï¼ˆ3 å€‹äº‹ä»¶ï¼‰
- **API Endpoints**: 6 å€‹æ–°ç«¯é»

### æ¸¬è©¦è¦†è“‹ç‡
- **ç·¨è­¯æ¸¬è©¦**: âœ… é€šé
- **é¡å‹æª¢æŸ¥**: âœ… é€šé
- **å–®å…ƒæ¸¬è©¦**: â³ å¾…åŸ·è¡Œ
- **æ•´åˆæ¸¬è©¦**: â³ å¾…åŸ·è¡Œ
- **E2E æ¸¬è©¦**: â³ å¾…åŸ·è¡Œ

---

## ğŸ”§ æŠ€è¡“å‚µå‹™èˆ‡å·²çŸ¥å•é¡Œ

### å·²ä¿®æ­£
- âœ… GoogleMapsService èªè¨€é¡å‹éŒ¯èª¤
- âœ… optimize_waypoints å±¬æ€§åç¨±éŒ¯èª¤
- âœ… tsconfig.json rootDir éæ–¼åš´æ ¼
- âœ… Monorepo è·¨å¥—ä»¶å¼•ç”¨ç·¨è­¯å•é¡Œ

### å¾…è™•ç†
- â³ PriceCheckService ä½¿ç”¨ createdAt åˆ¤æ–·ï¼ˆæ‡‰ä½¿ç”¨ deliveryDateï¼‰
- â³ ç„¡å–®å…ƒæ¸¬è©¦è¦†è“‹
- â³ ç„¡ E2E æ¸¬è©¦è¦†è“‹
- â³ LINE API éŒ¯èª¤è™•ç†å¯åŠ å¼·
- â³ ç¼ºå°‘ API Rate Limiting

### æ•ˆèƒ½è€ƒé‡
- â³ å¤§é‡é è¨‚å–®æ™‚åƒ¹æ ¼æª¢æŸ¥å¯èƒ½è¼ƒæ…¢ï¼ˆè€ƒæ…®æ‰¹æ¬¡è™•ç†ï¼‰
- â³ LINE æ¨æ’­ç„¡é‡è©¦æ©Ÿåˆ¶
- â³ èƒŒæ™¯æœå‹™å–®å¯¦ä¾‹é‹è¡Œï¼ˆå¤šå¯¦ä¾‹éœ€è¦åˆ†æ•£å¼é–ï¼‰

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

### å¤–éƒ¨è³‡æº
- [LINE Messaging API å®˜æ–¹æ–‡ä»¶](https://developers.line.biz/en/docs/messaging-api/)
- [Prisma å®˜æ–¹æ–‡ä»¶](https://www.prisma.io/docs/)
- [Railway éƒ¨ç½²æŒ‡å—](https://docs.railway.app/)

### å…§éƒ¨æ–‡ä»¶
- `apps/api/prisma/schema.prisma` - è³‡æ–™åº« Schema
- `apps/api/README.md` - API æœå‹™èªªæ˜
- `apps/web/README.md` - å‰ç«¯æ‡‰ç”¨èªªæ˜

---

## ğŸ‘¥ åœ˜éšŠå”ä½œ

### æœ€è¿‘è²¢ç»è€…
- Agent-4: LINE é€šçŸ¥äº‹ä»¶æ“´å……
- Agent-5: LINE Bot Webhook èˆ‡å®¢æˆ¶å›æ‡‰
- Agent-6: è‡ªå‹•æ¥å—æ©Ÿåˆ¶èˆ‡æ™‚æ®µåˆ¤æ–·

### ç•¶å‰è² è²¬äºº
- å°ˆæ¡ˆè² è²¬äºº: é»ƒå£«å˜‰
- å¾Œç«¯é–‹ç™¼: Claude (AI Assistant)
- å‰ç«¯é–‹ç™¼: Claude (AI Assistant)

---

## ğŸ“… ç‰ˆæœ¬æ­·å²

### v0.4.0 (2025-10-14) - é›™åƒ¹æ ¼ç³»çµ±èˆ‡ LINE é€šçŸ¥
- âœ… å¯¦ä½œé›™åƒ¹æ ¼ç³»çµ±
- âœ… å¯¦ä½œé è¨‚å–®èˆ‡æ™‚æ®µåˆ¤æ–·
- âœ… å¯¦ä½œåƒ¹æ ¼è®Šå‹•æª¢æŸ¥èˆ‡é€šçŸ¥
- âœ… å¯¦ä½œ LINE Bot å®¢æˆ¶å›æ‡‰è™•ç†
- âœ… å¯¦ä½œè‡ªå‹•æ¥å—æ©Ÿåˆ¶
- âœ… å®Œæˆæ•´åˆæ¸¬è©¦
- âœ… Git æäº¤èˆ‡æ¨é€

### v0.3.0 ä¹‹å‰
- åŸºç¤è¨‚å–®ç®¡ç†ç³»çµ±
- å•†å“ç®¡ç†ç³»çµ±
- å¸æ©Ÿé…é€ç³»çµ±
- å¾Œå°ç®¡ç†ä»‹é¢

---

**æœ€å¾Œæ›´æ–°**: 2025-10-14 22:53
**ç‹€æ…‹**: âœ… é–‹ç™¼å®Œæˆï¼Œæº–å‚™éƒ¨ç½²æ¸¬è©¦
**ä¸‹ä¸€æ­¥**: è¨­å®š LINE Bot ç’°å¢ƒè®Šæ•¸ä¸¦éƒ¨ç½²è‡³ Railway
