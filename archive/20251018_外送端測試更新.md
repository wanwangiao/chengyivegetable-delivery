# 2025-10-18 外送端測試最新進度

**紀錄時間**：2025-10-18 17:05  
**紀錄人員**：AI Assistant

---

## 🔍 目前成果
- 建立 `services/storage.ts` / `services/token-storage.ts`，支援 Web 與原生環境的登入 Token 持久化。
- 更新 `offline-queue.ts` 為非同步儲存，確保離線佇列在原生端也能排程補送。
- Driver Dashboard (`app/index.tsx`) 已加入推薦批次卡片、一鍵領單、問題 Dialog 與初次載入憑證畫面。
- README、`docs/delivery-routing.md` 同步描述新流程並修復原有亂碼。
- `pnpm --filter driver test` 現在會執行：
  - `app.smoke.cjs`：驗證登入畫面載入。
  - `storage.test.cjs`：驗證跨平台儲存行為。

## 🧪 尚需測試
- 推薦批次的互動（取得、顯示、領取）目前仍需手動或額外自動化測試。
- 問題回報 Dialog、領單 API 回應、離線補送等情境尚未自動化覆蓋。
- 建議在 Expo 或裝置上進行實際串接測試，確認流程與後端 API 行為一致。

## 📌 下一步建議
1. 規劃 React Native Testing Library 或 Detox/原生 E2E 測試，涵蓋批次領單與問題回報。
2. 與後端協調測試資料或 staging 環境，以便驗證真實 API 行為。
3. 若時間許可，可替 Dialog、領單流程追加 smoke 等級的互動測試，提升 CI 信心。
