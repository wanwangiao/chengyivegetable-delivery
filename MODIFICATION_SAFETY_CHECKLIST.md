# 🛡️ 系統修改安全檢查清單

> **在修改任何代碼之前必須完成此檢查清單！**

## 📋 修改前強制檢查

### ✅ 理解檢查
- [ ] **我完全理解要修改的功能模組是什麼**
- [ ] **我知道這個功能目前的運作狀態** (正常/有問題/不存在)
- [ ] **我了解此功能與其他系統的依賴關係**
- [ ] **我確認修改的必要性和優先級**

### ✅ 風險評估
- [ ] **我確認修改不會破壞現有正常運作的功能**
- [ ] **我評估了修改可能的副作用**
- [ ] **我了解回滾的複雜度和風險**
- [ ] **我有完整的測試計劃**

### ✅ 準備工作
- [ ] **我已經備份相關文件**
- [ ] **我創建了Git分支進行修改**
- [ ] **我準備了回滾方案**
- [ ] **我了解部署和測試流程**

## 🚨 禁止行為

### ❌ 絕對不要
- **不要在不理解系統的情況下刪除代碼**
- **不要同時修改多個不相關的功能**
- **不要在生產環境直接測試修改**
- **不要忽視系統間的依賴關係**

### ❌ 危險修改
- **刪除demoMode前要完全理解其用途**
- **修改資料庫結構前要評估影響**
- **更改API端點前要確認所有調用方**
- **修改訂單狀態前要了解完整流程**

## 📝 修改記錄模板

每次修改都要記錄：

```markdown
## 修改記錄 - [日期]

### 修改內容
- 修改了什麼功能
- 修改的原因
- 修改的範圍

### 影響評估  
- 可能影響的功能模組
- 測試結果
- 風險評估

### 回滾計劃
- 如何回滾
- 回滾的風險
- 回滾後的驗證步驟
```

## 🔍 系統關鍵依賴提醒

### 不要隨意修改的核心功能
1. **價格更新機制** (PriceChangeNotificationService)
2. **LINE通知系統** (LineNotificationService) 
3. **營業時間控制** (BasicSettingsService)
4. **PWA外送員系統** (driver相關路由)
5. **訂單生命週期** (orders相關邏輯)

### 可以安全修改的功能
1. **前端UI改善** (views/*.ejs)
2. **CSS樣式調整** (public/css/*)
3. **新增功能模組** (不影響現有功能)
4. **報表和統計功能** (新增獨立模組)

## 🎯 當前優先修復項目

### P0 - 立即修復
1. **訂單狀態同步問題** (影響外送員接單)

### P1 - 近期增強
1. **前台商品搜尋**
2. **後台客戶管理**
3. **實用報表系統**

### P2 - 長期優化
1. **系統效能優化**
2. **用戶體驗改善**
3. **新功能開發**

---

**⚠️ 記住：這個系統已經很完整，不要為了修改而修改！**